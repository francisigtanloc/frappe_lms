{"version":3,"file":"Batches-DfS07KH-.js","sources":["../../../../frontend/src/pages/Batches.vue"],"sourcesContent":["<template>\n\t<div class=\"\">\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-3 py-2.5 sm:px-5\"\n\t\t>\n\t\t\t<Breadcrumbs\n\t\t\t\tclass=\"h-7\"\n\t\t\t\t:items=\"[{ label: __('All Batches'), route: { name: 'Batches' } }]\"\n\t\t\t/>\n\t\t\t<div class=\"flex\">\n\t\t\t\t<router-link\n\t\t\t\t\tv-if=\"user.data\"\n\t\t\t\t\t:to=\"{\n\t\t\t\t\t\tname: 'BatchCreation',\n\t\t\t\t\t\tparams: { batchName: 'new' },\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<Button variant=\"solid\">\n\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t<Plus class=\"h-4 w-4\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ __('New Batch') }}\n\t\t\t\t\t</Button>\n\t\t\t\t</router-link>\n\t\t\t</div>\n\t\t</header>\n\t\t<div v-if=\"batches.data\" class=\"pb-5\">\n\t\t\t<div\n\t\t\t\tv-if=\"batches.data.length == 0 && batches.list.loading\"\n\t\t\t\tclass=\"p-5 text-base text-gray-700\"\n\t\t\t>\n\t\t\t\t{{ __('Loading Batches...') }}\n\t\t\t</div>\n\t\t\t<Tabs\n\t\t\t\tv-model=\"tabIndex\"\n\t\t\t\t:tabs=\"tabs\"\n\t\t\t\ttablistClass=\"overflow-x-visible flex-wrap !gap-3 md:flex-nowrap\"\n\t\t\t>\n\t\t\t\t<template #tab=\"{ tab, selected }\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"group -mb-px flex items-center gap-2 border-b border-transparent py-2.5 text-base text-gray-600 duration-300 ease-in-out hover:border-gray-400 hover:text-gray-900\"\n\t\t\t\t\t\t\t:class=\"{ 'text-gray-900': selected }\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<component v-if=\"tab.icon\" :is=\"tab.icon\" class=\"h-5\" />\n\t\t\t\t\t\t\t{{ __(tab.label) }}\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t:class=\"\n\t\t\t\t\t\t\t\t\tselected\n\t\t\t\t\t\t\t\t\t\t? 'text-gray-800 border border-gray-800'\n\t\t\t\t\t\t\t\t\t\t: 'border border-gray-500'\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tvariant=\"subtle\"\n\t\t\t\t\t\t\t\ttheme=\"gray\"\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ tab.count }}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template #default=\"{ tab }\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"tab.batches && tab.batches.value.length\"\n\t\t\t\t\t\tclass=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mt-5 mx-5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\tv-for=\"batch in tab.batches.value\"\n\t\t\t\t\t\t\t:to=\"{ name: 'BatchDetail', params: { batchName: batch.name } }\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BatchCard :batch=\"batch\" />\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\tclass=\"grid flex-1 place-items-center text-xl font-medium text-gray-500\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex flex-col items-center justify-center mt-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ __('No {0} batches found').format(tab.label.toLowerCase()) }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</Tabs>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport { createListResource, Breadcrumbs, Button, Tabs, Badge } from 'frappe-ui'\nimport { Plus } from 'lucide-vue-next'\nimport BatchCard from '@/components/BatchCard.vue'\nimport { inject, ref, computed } from 'vue'\n\nconst user = inject('$user')\n\nconst batches = createListResource({\n\tdoctype: 'LMS Batch',\n\turl: 'lms.lms.utils.get_batches',\n\tcache: ['batches', user?.data?.email],\n\tauto: true,\n})\n\nconst tabIndex = ref(0)\nconst tabs = [\n\t{\n\t\tlabel: 'Upcoming',\n\t\tbatches: computed(() => batches.data?.upcoming || []),\n\t\tcount: computed(() => batches.data?.upcoming?.length),\n\t},\n]\n\nif (user.data?.is_moderator) {\n\ttabs.push({\n\t\tlabel: 'Archived',\n\t\tbatches: computed(() => batches.data?.archived),\n\t\tcount: computed(() => batches.data?.archived?.length),\n\t})\n\ttabs.push({\n\t\tlabel: 'Private',\n\t\tbatches: computed(() => batches.data?.private),\n\t\tcount: computed(() => batches.data?.private?.length),\n\t})\n}\nif (user.data) {\n\ttabs.push({\n\t\tlabel: 'Enrolled',\n\t\tbatches: computed(() => batches.data?.enrolled),\n\t\tcount: computed(() => batches.data?.enrolled?.length),\n\t})\n}\n</script>\n"],"names":["user","inject","batches","createListResource","_a","tabIndex","ref","tabs","computed","_b"],"mappings":"0hEA8FA,MAAMA,EAAOC,EAAO,OAAO,EAErBC,EAAUC,EAAmB,CAClC,QAAS,YACT,IAAK,4BACL,MAAO,CAAC,WAAWC,EAAAJ,GAAA,YAAAA,EAAM,OAAN,YAAAI,EAAY,KAAK,EACpC,KAAM,EACP,CAAC,EAEKC,EAAWC,EAAI,CAAC,EAChBC,EAAO,CACZ,CACC,MAAO,WACP,QAASC,EAAS,IAAM,OAAA,QAAAJ,EAAAF,EAAQ,OAAR,YAAAE,EAAc,WAAY,CAAA,EAAE,EACpD,MAAOI,EAAS,IAAM,SAAA,OAAAC,GAAAL,EAAAF,EAAQ,OAAR,YAAAE,EAAc,WAAd,YAAAK,EAAwB,OAAM,CACpD,CACF,EAEA,OAAIA,EAAAT,EAAK,OAAL,MAAAS,EAAW,eACdF,EAAK,KAAK,CACT,MAAO,WACP,QAASC,EAAS,IAAA,OAAM,OAAAJ,EAAAF,EAAQ,OAAR,YAAAE,EAAc,SAAQ,EAC9C,MAAOI,EAAS,IAAM,SAAA,OAAAC,GAAAL,EAAAF,EAAQ,OAAR,YAAAE,EAAc,WAAd,YAAAK,EAAwB,OAAM,CACtD,CAAE,EACDF,EAAK,KAAK,CACT,MAAO,UACP,QAASC,EAAS,IAAA,OAAM,OAAAJ,EAAAF,EAAQ,OAAR,YAAAE,EAAc,QAAO,EAC7C,MAAOI,EAAS,IAAM,SAAA,OAAAC,GAAAL,EAAAF,EAAQ,OAAR,YAAAE,EAAc,UAAd,YAAAK,EAAuB,OAAM,CACrD,CAAE,GAEET,EAAK,MACRO,EAAK,KAAK,CACT,MAAO,WACP,QAASC,EAAS,IAAA,OAAM,OAAAJ,EAAAF,EAAQ,OAAR,YAAAE,EAAc,SAAQ,EAC9C,MAAOI,EAAS,IAAM,SAAA,OAAAC,GAAAL,EAAAF,EAAQ,OAAR,YAAAE,EAAc,WAAd,YAAAK,EAAwB,OAAM,CACtD,CAAE"}