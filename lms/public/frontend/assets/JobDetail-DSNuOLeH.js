import{ad as U,r as P,ae as D,k as $,x as p,G as S,H as d,B as a,C as n,y as m,N as i,A as e,I as x,aa as h,aw as N,D as B,d as C,$ as H,F as M,b as Y,a9 as q,ab as F}from"./frappe-ui-CgFK8870.js";import{b as T,i as E,c as J}from"./index-GARLdoCV.js";import{F as I}from"./file-text-DHp4eWlu.js";import{M as R}from"./map-pin-CXb3xrr8.js";/**
 * @license lucide-vue-next v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=T("PencilIcon",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=T("SendHorizontalIcon",[["path",{d:"m3 3 3 9-3 9 19-9Z",key:"1aobqy"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]),O={class:"flex flex-col gap-4"},K={key:0},Q={class:""},W={key:1,class:"flex items-center"},X={class:"border rounded-md p-2 mr-2"},ee={class:"flex flex-col"},te={class:"text-sm text-gray-500 mt-1"},ae={__name:"JobApplicationModal",props:U({job:{type:String,required:!0}},{modelValue:{},modelModifiers:{},application:{},applicationModifiers:{}}),emits:["update:modelValue","update:application"],setup(u){const r=P(null),y=D(u,"modelValue"),_=C("$user"),v=D(u,"application"),o=u,c=s=>{if(s.name.split(".").pop().toLowerCase()!="pdf")return"Only PDF file is allowed"},j=$({url:"frappe.client.insert",makeParams(s){var t,l;return{doc:{doctype:"LMS Job Application",user:(t=_.data)==null?void 0:t.name,resume:(l=r.value)==null?void 0:l.file_name,job:o.job}}}}),w=s=>{j.submit({},{validate(){if(!r.value)return"Please upload your resume"},onSuccess(){J({title:"Success",text:"Your application has been submitted",icon:"check",iconClasses:"bg-green-600 text-white rounded-md p-px"}),v.value.reload(),s()},onError(t){var l;J({title:"Error",text:((l=t.messages)==null?void 0:l[0])||t,icon:"x",iconClasses:"bg-red-600 text-white rounded-md p-px",position:"top-center",timeout:10})}})};return(s,t)=>(p(),S(e(B),{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=l=>y.value=l),class:"text-base",options:{title:s.__("Apply for this job"),size:"lg",actions:[{label:"Submit",variant:"solid",onClick:l=>{w(l)}}]}},{"body-content":d(()=>[a("div",O,[a("p",null,n(s.__("Submit your resume to proceed with your application for this position. Upon submission, it will be shared with the job poster.")),1),r.value?(p(),m("div",W,[a("div",X,[i(e(I),{class:"h-5 w-5 stroke-1.5 text-gray-700"})]),a("div",ee,[a("span",null,n(r.value.file_name),1),a("span",te,n(e(E)(r.value.file_size)),1)])])):(p(),m("div",K,[i(e(N),{fileTypes:[".pdf"],validateFile:c,onSuccess:t[0]||(t[0]=l=>{r.value=l})},{default:d(({file:l,progress:g,uploading:b,openFileSelector:k})=>[a("div",Q,[i(e(x),{onClick:k,loading:b},{default:d(()=>[h(n(b?`Uploading ${g}%`:"Upload your resume"),1)]),_:2},1032,["onClick","loading"])])]),_:1})]))])]),_:1},8,["modelValue","options"]))}},oe={class:""},se={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-3 py-2.5 sm:px-5"},le={key:0,class:"flex"},ie={key:1},ne={key:0},re={class:"p-5 sm:p-5"},de={class:"flex mb-4"},pe=["src","alt"],ce={class:"text-2xl font-semibold mb-2"},me={class:"font-medium"},ue={class:"font-medium"},_e={class:"flex items-center mt-2"},be=["innerHTML"],ge={__name:"JobDetail",props:{job:{type:String,required:!0}},setup(u){const r=C("$user"),y=C("$dayjs"),_=P(!1),v=u,o=$({url:"lms.lms.api.get_job_details",params:{job:v.job},cache:["job",v.job],auto:!0,onSuccess:s=>{var t;(t=r.data)!=null&&t.name&&c.submit()}}),c=$({url:"frappe.client.get_list",makeParams(s){var t,l;return{doctype:"LMS Job Application",filters:{job:(t=o.data)==null?void 0:t.name,user:(l=r.data)==null?void 0:l.name}}}}),j=()=>{_.value=!0},w=s=>{window.location.href=`/login?redirect-to=/job-openings/${s}`};return(s,t)=>{var g,b,k,V,A,z;const l=H("router-link");return p(),m("div",oe,[a("header",se,[i(e(q),{class:"h-7",items:[{label:s.__("Jobs"),route:{name:"Jobs"}},{label:(g=e(o).data)==null?void 0:g.job_title,route:{name:"JobDetail",params:{job:(b=e(o).data)==null?void 0:b.name}}}]},null,8,["items"]),(k=e(r).data)!=null&&k.name?(p(),m("div",le,[e(r).data.name==((V=e(o).data)==null?void 0:V.owner)?(p(),S(l,{key:0,to:{name:"JobCreation",params:{jobName:(A=e(o).data)==null?void 0:A.name}}},{default:d(()=>[i(e(x),{class:"mr-2"},{prefix:d(()=>[i(e(Z),{class:"h-4 w-4 stroke-1.5"})]),default:d(()=>[h(" "+n(s.__("Edit")),1)]),_:1})]),_:1},8,["to"])):M("",!0),(z=e(c).data)!=null&&z.length?M("",!0):(p(),S(e(x),{key:1,variant:"solid",onClick:t[0]||(t[0]=f=>j())},{prefix:d(()=>[i(e(G),{class:"h-4 w-4"})]),default:d(()=>[h(" "+n(s.__("Apply")),1)]),_:1}))])):(p(),m("div",ie,[i(e(x),{onClick:t[1]||(t[1]=f=>{var L;return w((L=e(o).data)==null?void 0:L.name)})},{default:d(()=>[a("span",null,n(s.__("Login to apply")),1)]),_:1})]))]),e(o).data?(p(),m("div",ne,[a("div",re,[a("div",de,[a("img",{src:e(o).data.company_logo,class:"w-16 h-16 rounded-lg object-contain mr-4",alt:e(o).data.company_name},null,8,pe),a("div",null,[a("div",ce,n(e(o).data.job_title),1),a("div",null,[h(n(s.__("posted by"))+" ",1),a("span",me,n(e(o).data.company_name),1),h(" "+n(s.__("on"))+" ",1),a("span",ue,n(e(y)(e(o).data.creation).format("DD MMM YYYY")),1)]),a("div",_e,[i(e(F),{label:e(o).data.type,theme:"green",size:"lg"},null,8,["label"]),i(e(F),{label:e(o).data.location,theme:"gray",size:"lg",class:"ml-4"},{prefix:d(()=>[i(e(R),{class:"h-4 w-4 stroke-1.5"})]),_:1},8,["label"])])])]),a("p",{innerHTML:e(o).data.description,class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-gray-300 prose-th:border-gray-300 prose-td:relative prose-th:relative prose-th:bg-gray-100 prose-sm max-w-none !whitespace-normal mt-6"},null,8,be)]),i(ae,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=f=>_.value=f),application:e(c),"onUpdate:application":t[3]||(t[3]=f=>Y(c)?c.value=f:null),job:e(o).data.name},null,8,["modelValue","application","job"])])):M("",!0)])}}};export{ge as default};
//# sourceMappingURL=JobDetail-DSNuOLeH.js.map
