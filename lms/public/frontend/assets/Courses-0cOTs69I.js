import{a8 as N,r as k,j as r,$ as L,A as l,x as n,y as c,B as d,N as m,H as u,C as _,G as f,F as g,d as V,a9 as $,aa as h,I as B,T as j,W as D,ab as A,J as T,K as U,ac as z}from"./frappe-ui-CgFK8870.js";import{_ as E}from"./CourseCard-B9lKjDpY.js";import{u as F}from"./index-GARLdoCV.js";import{P as I}from"./plus-CsLQFB36.js";import"./UserAvatar-CMVzFlfz.js";import"./CourseInstructors-B4HCEx2w.js";import"./star-Bm-2xHYM.js";const M={key:0},P={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-3 py-2.5 sm:px-5"},R={class:"flex"},S={class:""},G={key:0,class:"p-5 text-base text-gray-700"},H={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 my-5 mx-5"},J={key:1,class:"grid flex-1 place-items-center text-xl font-medium text-gray-500"},K={class:"flex flex-col items-center justify-center mt-4"},ae={__name:"Courses",setup(W){var v,y,x;const i=V("$user"),s=N({type:"list",doctype:"LMS Course",cache:["courses",(v=i==null?void 0:i.data)==null?void 0:v.email],url:"lms.lms.utils.get_courses",auto:!0}),b=k(0),p=[{label:"Live",courses:r(()=>{var e;return((e=s.data)==null?void 0:e.live)||[]}),count:r(()=>{var e,a;return(a=(e=s.data)==null?void 0:e.live)==null?void 0:a.length})},{label:"New",courses:r(()=>{var e;return(e=s.data)==null?void 0:e.new}),count:r(()=>{var e,a;return(a=(e=s.data)==null?void 0:e.new)==null?void 0:a.length})},{label:"Upcoming",courses:r(()=>{var e;return(e=s.data)==null?void 0:e.upcoming}),count:r(()=>{var e,a;return(a=(e=s.data)==null?void 0:e.upcoming)==null?void 0:a.length})}];i.data&&(p.push({label:"Enrolled",courses:r(()=>{var e;return(e=s.data)==null?void 0:e.enrolled}),count:r(()=>{var e,a;return(a=(e=s.data)==null?void 0:e.enrolled)==null?void 0:a.length})}),(i.data.is_moderator||i.data.is_instructor||(x=(y=s.data)==null?void 0:y.created)!=null&&x.length)&&p.push({label:"Created",courses:r(()=>{var e;return(e=s.data)==null?void 0:e.created}),count:r(()=>{var e,a;return(a=(e=s.data)==null?void 0:e.created)==null?void 0:a.length})}),i.data.is_moderator&&p.push({label:"Under Review",courses:r(()=>{var e;return(e=s.data)==null?void 0:e.under_review}),count:r(()=>{var e,a;return(a=(e=s.data)==null?void 0:e.under_review)==null?void 0:a.length})}));const w=r(()=>({title:"Courses",description:"All Courses divided by categories"}));return F(w),(e,a)=>{const C=L("router-link");return l(s).data?(n(),c("div",M,[d("header",P,[m(l($),{class:"h-7",items:[{label:e.__("All Courses"),route:{name:"Courses"}}]},null,8,["items"]),d("div",R,[m(C,{to:{name:"CreateCourse",params:{courseName:"new"}}},{default:u(()=>{var t;return[(t=l(i).data)!=null&&t.is_moderator?(n(),f(l(B),{key:0,variant:"solid"},{prefix:u(()=>[m(l(I),{class:"h-4 w-4"})]),default:u(()=>[h(" "+_(e.__("New Course")),1)]),_:1})):g("",!0)]}),_:1})])]),d("div",S,[l(s).data.length==0&&l(s).list.loading?(n(),c("div",G,_(e.__("Loading Courses...")),1)):(n(),f(l(z),{key:1,modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=t=>b.value=t),tablistClass:"overflow-x-visible flex-wrap !gap-3 md:flex-nowrap",tabs:p},{tab:u(({tab:t,selected:o})=>[d("div",null,[d("button",{class:j(["group -mb-px flex items-center gap-2 overflow-hidden border-b border-transparent py-2.5 text-base text-gray-600 duration-300 ease-in-out hover:border-gray-400 hover:text-gray-900",{"text-gray-900":o}])},[t.icon?(n(),f(D(t.icon),{key:0,class:"h-5"})):g("",!0),h(" "+_(e.__(t.label))+" ",1),m(l(A),{theme:"gray"},{default:u(()=>[h(_(t.count),1)]),_:2},1024)],2)])]),default:u(({tab:t})=>[t.courses&&t.courses.value.length?(n(),c("div",H,[(n(!0),c(T,null,U(t.courses.value,o=>(n(),f(C,{to:o.membership&&o.current_lesson?{name:"Lesson",params:{courseName:o.name,chapterNumber:o.current_lesson.split(".")[0],lessonNumber:o.current_lesson.split(".")[1]}}:o.membership?{name:"Lesson",params:{courseName:o.name,chapterNumber:1,lessonNumber:1}}:{name:"CourseDetail",params:{courseName:o.name}}},{default:u(()=>[m(E,{course:o},null,8,["course"])]),_:2},1032,["to"]))),256))])):(n(),c("div",J,[d("div",K,[d("div",null,_(e.__("No {0} courses found").format(t.label.toLowerCase())),1)])]))]),_:1},8,["modelValue"]))])])):g("",!0)}}};export{ae as default};
//# sourceMappingURL=Courses-0cOTs69I.js.map
