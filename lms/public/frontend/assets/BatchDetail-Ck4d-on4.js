import{j as $,$ as D,x as l,y as h,G as b,H as i,aa as N,C as r,A as t,ab as B,F as n,B as e,N as c,I as k,d as L,k as C,J as H,K as j,S as O,a9 as V}from"./frappe-ui-CgFK8870.js";import{a as E,B as M,f as w}from"./index-GARLdoCV.js";import{_ as R}from"./CourseCard-B9lKjDpY.js";import{_ as S,C as T}from"./DateRange-BwGlDrDQ.js";import"./UserAvatar-CMVzFlfz.js";import"./CourseInstructors-B4HCEx2w.js";import"./star-Bm-2xHYM.js";const A={key:0,class:"shadow rounded-md p-5 lg:w-72"},F={key:2,class:"text-lg font-semibold mb-3"},I={class:"flex items-center mb-3"},q={class:"flex items-center"},z={__name:"BatchOverlay",props:{batch:{type:Object,default:null}},setup(s){const y=L("$user"),f=s,m=$(()=>{var a,g,_,o;return(a=f.batch.data)!=null&&a.seat_count?((g=f.batch.data)==null?void 0:g.seat_count)-((o=(_=f.batch.data)==null?void 0:_.students)==null?void 0:o.length):null});return(a,g)=>{var o,u,d,p;const _=D("router-link");return s.batch.data?(l(),h("div",A,[s.batch.data.seat_count&&m.value>0?(l(),b(t(B),{key:0,theme:"green",class:"self-start mb-2 float-right"},{default:i(()=>[N(r(m.value)+" "+r(a.__("Seat Left")),1)]),_:1})):s.batch.data.seat_count&&m.value<=0?(l(),b(t(B),{key:1,theme:"red",class:"self-start mb-2 float-right"},{default:i(()=>[N(r(a.__("Sold Out")),1)]),_:1})):n("",!0),s.batch.data.amount?(l(),h("div",F,r(t(E)(s.batch.data.amount,s.batch.data.currency)),1)):n("",!0),e("div",I,[c(t(M),{class:"h-4 w-4 stroke-1.5 mr-2 text-gray-700"}),e("span",null,r(s.batch.data.courses.length)+" "+r(a.__("Courses")),1)]),c(S,{startDate:s.batch.data.start_date,endDate:s.batch.data.end_date,class:"mb-3"},null,8,["startDate","endDate"]),e("div",q,[c(t(T),{class:"h-4 w-4 stroke-1.5 mr-2 text-gray-700"}),e("span",null,r(t(w)(s.batch.data.start_time))+" - "+r(t(w)(s.batch.data.end_time)),1)]),(u=(o=t(y))==null?void 0:o.data)!=null&&u.is_moderator?(l(),b(_,{key:3,to:{name:"Batch",params:{batchName:s.batch.data.name}}},{default:i(()=>[c(t(k),{variant:"solid",class:"w-full mt-4"},{default:i(()=>[e("span",null,r(a.__("Manage Batch")),1)]),_:1})]),_:1},8,["to"])):s.batch.data.paid_batch?(l(),b(_,{key:4,to:{name:"Billing",params:{type:"batch",name:s.batch.data.name}}},{default:i(()=>[c(t(k),{class:"w-full mt-4",variant:"solid"},{default:i(()=>[e("span",null,r(a.__("Register Now")),1)]),_:1})]),_:1},8,["to"])):s.batch.data.allow_self_enrollment?(l(),b(t(k),{key:5,variant:"solid",class:"w-full mt-2"},{default:i(()=>[N(r(a.__("Enroll Now")),1)]),_:1})):n("",!0),(p=(d=t(y))==null?void 0:d.data)!=null&&p.is_moderator?(l(),b(_,{key:6,to:{name:"BatchCreation",params:{batchName:s.batch.data.name}}},{default:i(()=>[c(t(k),{class:"w-full mt-2"},{default:i(()=>[e("span",null,r(a.__("Edit")),1)]),_:1})]),_:1},8,["to"])):n("",!0)])):n("",!0)}}},G={key:0,class:""},J={class:"sticky top-0 z-10 border-b bg-white px-3 py-2.5 sm:px-5"},K={class:"m-5 pb-10"},P={class:"text-3xl font-semibold"},Q={class:"my-3"},U={class:"flex flex-col gap-2 lg:gap-0 lg:flex-row lg:items-center justify-between lg:w-1/2"},W={class:"flex items-center"},X={key:0,class:"hidden lg:block"},Y={key:1,class:"hidden lg:block"},Z={class:"flex items-center"},tt={class:"grid lg:grid-cols-[60%,20%] gap-4 lg:gap-20 mt-10"},at={class:"order-2 lg:order-none"},et=["innerHTML"],st={class:"order-1 lg:order-none"},rt={key:0},lt={class:"flex items-center mt-10"},ot={class:"text-2xl font-semibold"},ct={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-5"},nt={key:0},dt=["innerHTML"],gt={__name:"BatchDetail",props:{batchName:{type:String,required:!0}},setup(s){const y=L("$user"),f=O(),m=s,a=C({url:"lms.lms.utils.get_batch_details",cache:["batch",m.batchName],params:{batch:m.batchName},auto:!0,onSuccess(o){var u,d;(d=o.students)!=null&&d.includes((u=y.data)==null?void 0:u.name)&&f.push({name:"Batch",params:{batchName:m.batchName}})}}),g=C({url:"lms.lms.utils.get_batch_courses",params:{batch:m.batchName},cache:["batchCourses",m.batchName],auto:!0}),_=$(()=>{var u,d;let o=[{label:"All Batches",route:{name:"Batches"}}];return o.push({label:(u=a==null?void 0:a.data)==null?void 0:u.title,route:{name:"BatchDetail",params:{batchName:(d=a==null?void 0:a.data)==null?void 0:d.name}}}),o});return(o,u)=>{var p,x;const d=D("router-link");return t(a).data?(l(),h("div",G,[e("header",J,[c(t(V),{items:_.value},null,8,["items"])]),e("div",K,[e("div",null,[e("div",P,r(t(a).data.title),1),e("div",Q,r(t(a).data.description),1),e("div",U,[e("div",W,[c(t(M),{class:"h-4 w-4 text-gray-700 mr-2"}),e("span",null,r((x=(p=t(a).data)==null?void 0:p.courses)==null?void 0:x.length)+" "+r(o.__("Courses")),1)]),t(a).data.courses?(l(),h("span",X,"·")):n("",!0),c(S,{startDate:t(a).data.start_date,endDate:t(a).data.end_date},null,8,["startDate","endDate"]),t(a).data.start_date?(l(),h("span",Y,"·")):n("",!0),e("div",Z,[c(t(T),{class:"h-4 w-4 text-gray-700 mr-2"}),e("span",null,r(t(w)(t(a).data.start_time))+" - "+r(t(w)(t(a).data.end_time)),1)])])]),e("div",tt,[e("div",at,[e("div",{class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-gray-300 prose-th:border-gray-300 prose-td:relative prose-th:relative prose-th:bg-gray-100 prose-sm max-w-none !whitespace-normal mt-6",innerHTML:t(a).data.batch_details},null,8,et)]),e("div",st,[c(z,{batch:t(a)},null,8,["batch"])])]),t(a).data.courses.length?(l(),h("div",rt,[e("div",lt,[e("div",ot,r(o.__("Courses")),1)]),e("div",ct,[t(a).data.courses?(l(!0),h(H,{key:0},j(t(g).data,v=>(l(),h("div",{key:v.course},[c(d,{to:{name:"CourseDetail",params:{courseName:v.name}}},{default:i(()=>[(l(),b(R,{course:v,key:v.name},null,8,["course"]))]),_:2},1032,["to"])]))),128)):n("",!0)]),t(a).data.batch_details_raw?(l(),h("div",nt,[e("div",{innerHTML:t(a).data.batch_details_raw,class:"batch-description"},null,8,dt)])):n("",!0)])):n("",!0)])])):n("",!0)}}};export{gt as default};
//# sourceMappingURL=BatchDetail-Ck4d-on4.js.map
